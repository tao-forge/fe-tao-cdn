{"version":3,"sources":["../controller/routes.js","../previewer/factory.js","../controller/tests/action.js","../controller/tests/editTest.js","module-create.js"],"names":[],"mappings":"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","sourcesContent":["/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014-2020 (original work) Open Assessment Technologies SA\n */\n\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\ndefine('taoTests/controller/routes',[],function(){\n    'use strict';\n    return {\n        'Tests' : {\n            'deps' : 'controller/tests/action',\n            'actions' : {\n                'editTest' : 'controller/tests/editTest'\n            }\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2020 (original work) Open Assessment Technologies SA ;\n */\n/**\n * @author Hanna Dzmitryieva <hanna@taotesting.com>\n */\ndefine('taoTests/previewer/factory',[\n    'lodash',\n    'context',\n    'module',\n    'core/providerLoader',\n    'core/providerRegistry',\n    'core/logger'\n], function (\n    _,\n    context,\n    module,\n    providerLoaderFactory,\n    providerRegistry\n) {\n    'use strict';\n\n    /**\n     * Loads and display the test previewer\n     * @param {String} type - The type of previewer\n     * @param {String} uri - The URI of the test to load\n     * @param {Object} [config] - Some config entries\n     * @param {String} [config.fullPage] - Force the previewer to occupy the full window.\n     * @param {String} [config.readOnly] - Do not allow to modify the previewed test.\n     * @param {Object} [config.previewers] - Optionally load static adapters. By default take them from the module's config.\n     * @returns {Promise}\n     */\n    function previewerFactory(type, uri, config) {\n        config = _.defaults(config || {}, module.config());\n        return providerLoaderFactory()\n            .addList(config.previewers)\n            .load(context.bundle)\n            .then(function (providers) {\n                _.forEach(providers, function (provider) {\n                    previewerFactory.registerProvider(provider.name, provider);\n                });\n            })\n            .then(function () {\n                return previewerFactory.getProvider(type);\n            })\n            .then(function (provider) {\n                return provider.init(uri, config);\n            });\n    }\n\n    return providerRegistry(previewerFactory, function validateProvider(provider) {\n        if (!_.isFunction(provider.init)) {\n            throw new TypeError('The previewer provider MUST have a init() method');\n        }\n        return true;\n    });\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 - 2020 (original work) Open Assessment Techniologies SA\n *\n */\ndefine('taoTests/controller/tests/action',[\n    'lodash',\n    'i18n',\n    'layout/actions/binder',\n    'uri',\n    'ui/feedback',\n    'core/logger',\n    'taoTests/previewer/factory'\n], function(_, __, binder, uri, feedback, loggerFactory, previewerFactory){\n    'use strict';\n\n    const logger = loggerFactory('taoTests/controller/action');\n\n    binder.register('testPreview', function testPreview(actionContext) {\n        previewerFactory(\n            'qtiTest', // TODO - move to BE configuration\n            uri.decode(actionContext.uri),\n            {\n                readOnly: false,\n                fullPage: true\n            })\n            .catch(err => {\n                logger.error(err);\n                feedback().error(__('Test Preview is not installed, please contact to your administrator.'));\n            });\n    });\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015-2019 (original work) Open Assessment Technologies SA;\n */\n\n/**\n * Test edition controller\n *\n */\ndefine('taoTests/controller/tests/editTest',[\n    'jquery',\n    'ui/lock',\n    'module',\n    'layout/actions',\n],\tfunction($, lock, module, actions){\n    'use strict';\n\n    return {\n\n\n        /**\n         * Controller's entrypoint\n         */\n        start(){\n\n            const config = module.config();\n            const previewAction = actions.getBy('test-preview');\n            if (previewAction) {\n                previewAction.state.disabled = !config.isPreviewEnabled;\n                actions.updateState();\n            }\n\n            $('#lock-box').each(function() {\n                lock($(this)).register();\n            });\n        }\n    };\n});\n\n","\ndefine(\"taoTests/loader/taoTests.bundle\", function(){});\n"]}